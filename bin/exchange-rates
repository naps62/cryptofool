#!/usr/bin/env ruby

$LOAD_PATH.unshift(File.join(File.expand_path(File.dirname(__FILE__)), "..", "lib"))

require "cryptofool"

config = Cryptofool::Config.new
client = Cryptofool::Apis::CoinMarketCap.new


response = client.ticker

response.each do |ticker|
  rate_key = "price_#{config.base_currency.downcase}"

  if config.crypto_whitelist.member?(ticker.symbol)
    puts "#{ticker.symbol}-#{config.base_currency} #{ticker[rate_key]}"
  end
end
